<!DOCTYPE html>
<html>

	<script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
	<script src="gradeupjs/heatmap.js"></script>
	<script src="gradeupjs/grades2.js"></script>
	<script src="gradeupjs/burnup.js"></script>
  
	<h2 style="font-size:30px; color:green; text-align:left">Gradeup</h2>
	
	<label for="cars">Which Course do you want to see?</label>
	<select name="cars" id="courseSelection" onchange="valueChanged()">
		<option value="2">Math</option>
		<option value="4">English</option>
	</select>
	
	Change the Scale: <input type="number" id="scaleSelection" name="scaleInput" value="500" min="100" max="1000" onchange="valueChanged()">
	 
	<h2 style="font-size:30px; color:green; text-align:left">Grades Burnup</h2>
	<div id="svgContainer"></div>
	
	<h2 style="font-size:30px; color:green; text-align:left">Course Load Heatmap</h2>
	<div id="svgContainer2"></div>
		
    <script>
		/*TODO:			
			update block_gradeup.php to save all course grades so the above works^
			pull out the string maker for the javascript and make into array for all courses etc...
		*/
		
		//check if the user changed scale or selected a new course to see
		function valueChanged() {
			var e = document.getElementById("courseSelection");
			var s = document.getElementById("scaleSelection");
			console.log("new course: " + e.options[e.selectedIndex].value);
			console.log("new scale: " + s.value);
			
			//redraw			
			let scale = parseInt(s.value);
			draw.size(scale+scale*2/3,scale+scale/6); //additional area for chart legend and assignment names
			draw.clear();
			drawChart(scale,draw);
			drawAssignments(scale, draw,data);
		
			draw2.size(scale+scale*.66,scale/2);
			draw2.clear();
			drawHeatMap(scale,draw2,data,classStartDate);	
		}
		

        //Normally a call to get data, but this will do for an example
        function getData() {
            let data = grades;
            return data;
        }

        let promptString = 'Please enter a What-IF Grade';
        let gradeString = 'Grade';
        let weightString = 'Weight';
        let averageString = 'Average';
        let maxGradeString = 'Max Grade';
        let projectionGradeString = 'Projection Grade';
        let legendMinString =  'Your Current/Min Grade';
        let legendAverageString = 'Class Average';
        let potentialGradeString = 'Your Potential/Max Grade';
        let predictedGradeString = 'Your Predicted Grade';
        let legendString = 'Legend';
        let resetButtonString = 'Reset Data';
        let heatMapString = "Heatmap Chart";
		
		let data = getData();
		let scale = 500;
		var draw = SVG().addTo('#svgContainer').size(scale + scale*2/3,scale+scale/6); 
		drawChart(scale,draw);
		drawAssignments(scale, draw,data);
		classStartDate = 1588699454;
		var draw2 = SVG().addTo('#svgContainer2').size(scale+scale*.66,scale/2);
		drawHeatMap(scale,draw2,data,classStartDate);
     </script>
</html>